aspect NameResolution {

  syn Def Var.getDef();
  eq Var.getDef() {
    String name = getName();
    ASTNode p = (ASTNode)this;
    while(p.parent != null) {
        p = p.parent;
    }
    for(ASTNode def : p.children[0].children) {
        if(def == null) continue;
        if(((Def)def).getName().equals(name)) {
            return (Def)def;
        }
    }
    return new Def();
  }
}